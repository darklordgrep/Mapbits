prompt --application/set_environment
set define off verify off feedback off
whenever sqlerror exit sql.sqlcode rollback
--------------------------------------------------------------------------------
--
-- Oracle APEX export file
--
-- You should run the script connected to SQL*Plus as the owner (parsing schema)
-- of the application.
--
-- NOTE: Calls to apex_application_install override the defaults below.
--
--------------------------------------------------------------------------------
begin
wwv_flow_imp.import_begin (
 p_version_yyyy_mm_dd=>'2022.10.07'
,p_release=>'22.2.8'
,p_default_workspace_id=>2612926235066099
,p_default_application_id=>107981
,p_default_id_offset=>197864740331967674
,p_default_owner=>'MVDGIS'
);
end;
/
 
prompt APPLICATION 107981 - Mapbits Demo
--
-- Application Export:
--   Application:     107981
--   Name:            Mapbits Demo
--   Date and Time:   14:58 Friday December 29, 2023
--   Exported By:     LESS
--   Flashback:       0
--   Export Type:     Component Export
--   Manifest
--     PLUGIN: 352633889691403999
--   Manifest End
--   Version:         22.2.8
--   Instance ID:     61817619049184
--

begin
  -- replace components
  wwv_flow_imp.g_mode := 'REPLACE';
end;
/
prompt --application/shared_components/plugins/dynamic_action/mil_army_usace_mapbits_export_to_image
begin
wwv_flow_imp_shared.create_plugin(
 p_id=>wwv_flow_imp.id(352633889691403999)
,p_plugin_type=>'DYNAMIC ACTION'
,p_name=>'MIL.ARMY.USACE.MAPBITS.EXPORT_TO_IMAGE'
,p_display_name=>'Mapbits Export To Image'
,p_category=>'EXECUTE'
,p_javascript_file_urls=>'#PLUGIN_FILES#mapbits-export.min.js'
,p_plsql_code=>wwv_flow_string.join(wwv_flow_t_varchar2(
'function mapbits_export_ajax (',
'  p_dynamic_action in apex_plugin.t_dynamic_action,',
'  p_plugin         in apex_plugin.t_plugin )',
'return apex_plugin.t_dynamic_action_ajax_result is',
'  l_image_collection_name varchar2(32);',
'  l_imagetxt clob;',
'  l_buffer_clob clob;',
'  l_chunk_no number;',
'  l_format varchar2(200);',
'  rt apex_plugin.t_dynamic_action_ajax_result;',
'begin',
'  if apex_application.g_x10 = ''WRITEBACK'' then',
'    -- Write parts of a base 64-encoded images to the clob column of a collection. (Can''t pass large datasets without splitting them.)',
'    l_image_collection_name := apex_application.g_x01;',
'    if not l_image_collection_name is null then',
'      l_imagetxt := apex_application.g_x02;',
'      l_chunk_no := apex_application.g_x03;',
'      l_format := apex_application.g_x04;',
'',
'      -- If this is the first writeback for the image, then create / truncate apex collection and add a single member. Put the input data into the',
'      -- clob column. Otherwise, update the existing member by appending the input data to existing data in the clob column.',
'      if l_chunk_no is null or l_chunk_no = 0 then',
'        apex_collection.create_or_truncate_collection(p_collection_name => l_image_collection_name);',
'        apex_collection.add_member(p_collection_name => l_image_collection_name,  p_clob001 => l_imagetxt, p_c001 => l_format);',
'      else',
'        dbms_lob.createtemporary(l_buffer_clob, TRUE);',
'        select clob001 into l_buffer_clob from apex_collections where collection_name = l_image_collection_name and seq_id = 1;',
'        l_buffer_clob := l_buffer_clob || l_imagetxt;',
'        apex_collection.update_member(p_collection_name => l_image_collection_name, p_seq =>1, p_clob001 => l_buffer_clob );',
'        dbms_lob.freetemporary(l_buffer_clob);',
'      end if;',
'      htp.p(''{"Status" : "No Error"}'');',
'    else',
'      htp.p(''{"Status" : "[XYZZY] No Imagery Collection Name specified. Nothing happens."}'');',
'    end if;',
'  elsif apex_application.g_x10 = ''WRITEBACK_FINISH'' then',
'    -- On the WRITEBACK_FINISH operation, convert the clob in the apex collection to a blob and store it in the member blob column. ',
'    -- We only create the blob at the end for performance reasons.',
'    l_image_collection_name := apex_application.g_x01;',
'    select clob001 into l_buffer_clob from apex_collections where collection_name = l_image_collection_name;',
'    apex_collection.update_member(p_collection_name => l_image_collection_name, p_seq =>1, p_clob001 => l_buffer_clob, p_blob001 => apex_web_service.clobbase642blob(l_buffer_clob) );',
'    htp.p(''{"Status" : "No Error"}'');',
'  end if; ',
'  return rt;',
'end;',
'',
'function mapbits_export (',
'  p_dynamic_action in apex_plugin.t_dynamic_action,',
'  p_plugin         in apex_plugin.t_plugin )',
'return apex_plugin.t_dynamic_action_render_result is',
'  l_region_id varchar2(4000);',
'  l_action_name varchar2(80);',
'  l_region_type varchar2(40);',
'  rt apex_plugin.t_dynamic_action_render_result;',
'  -- fetch attribute values',
'  l_image_collection_name p_dynamic_action.attribute_01%type := p_dynamic_action.attribute_01;',
'  l_image_format p_dynamic_action.attribute_02%type := p_dynamic_action.attribute_02;',
'  l_destination p_dynamic_action.attribute_03%type := p_dynamic_action.attribute_03;',
'  l_filename_item p_dynamic_action.attribute_04%type := p_dynamic_action.attribute_04;',
'begin',
'  -- Get the affected region, which must be the map region, to use for the export.',
'  -- If not found or the region is not a map, then return an error. ',
'  begin',
'    select nvl(r.static_id, ''R''||da.affected_region_id), r.source_type, da.dynamic_action_name into l_region_id, l_region_type, l_action_name',
'      from apex_application_page_da_acts da, apex_application_page_regions r',
'      where da.affected_region_id = r.region_id',
'      and da.application_id = v(''APP_ID'') and da.page_id = v(''APP_PAGE_ID'')',
'      and da.action_id = p_dynamic_action.id;',
'    if not l_region_type = ''Map'' then',
'      raise_application_error(-20341, ''Configuration ERROR: Mapbits Export To Image DA for "'' || l_action_name ||  ''" ['' || p_dynamic_action.id || ''] is associated with the wrong type of region. It must be associated with a Map region. Check the Affe'
||'cted Elements section of the plugin settings.'');',
'    end if;',
'  exception when NO_DATA_FOUND then',
'    raise_application_error(-20361, ''Configuration ERROR: Mapbits Export To Image DA ['' || p_dynamic_action.id || ''] is not associated with a region. It must be associated with a Map region.  Check the Affected Elements section of the plugin settings'
||'.'');',
'  end;',
'',
'  -- Call the function, pass in the plugin attributes.',
'  rt.javascript_function := ''function () {'' ||',
'    ''mapbits_export("'' || p_dynamic_action.id || ''", "'' || apex_plugin.get_ajax_identifier || ''", "'' || l_region_id || ''", {''',
'      || apex_javascript.add_attribute(''collection'', l_image_collection_name)',
'      || apex_javascript.add_attribute(''format'', l_image_format)',
'      || apex_javascript.add_attribute(''destination'', l_destination)',
'      || apex_javascript.add_attribute(''filenameItem'', l_filename_item)',
'    || ''});}'';',
'  return rt;',
'end;'))
,p_api_version=>2
,p_render_function=>'mapbits_export'
,p_ajax_function=>'mapbits_export_ajax'
,p_standard_attributes=>'ITEM:REGION:REQUIRED'
,p_substitute_attributes=>true
,p_subscribe_plugin_settings=>true
,p_help_text=>wwv_flow_string.join(wwv_flow_t_varchar2(
'<p>The Mapbits Export Image plugin is a dynamic action that exports the canvas of an APEX Map Region to an image and stores the image into an APEX Collection. ',
'Upon execution of the dynamic action:</p>',
'<ul>',
'<li>The C001 column will store the mime type of the map image.</li>',
'<li>The CLOB001 column will store the map image using base64 encoding (without the "data:<format>," prefix).</li>',
'<li>The BLOB001 column will store the map image in binary form.</li>',
'</ul>',
'<p>The collection only uses one member; Multiple executions of the dynamic action will overwrite the same member in the Apex Collection.</p>',
'<p>The export process happens asynchronously. When export is complete, the plugin will trigger a ''Map Export Completed'' event, indicating that the image is completely written into the Collection. If you',
'take additional steps, such as generating a PDF, after exporting a map image, you will need to make a dynamic action responding to this event or else you will find a null or partial image in the Collection.</p>'))
,p_version_identifier=>'4.6.20231201'
,p_about_url=>'https://github.com/darklordgrep/Mapbits'
,p_plugin_comment=>wwv_flow_string.join(wwv_flow_t_varchar2(
'Module   : Mapbits 4 - Export To Image',
'Location : $Id: dynamic_action_plugin_mil_army_usace_mapbits_export_to_image.sql 18808 2023-12-29 20:58:50Z b2eddjw9 $',
'Date     : $Date: 2023-12-29 14:58:50 -0600 (Fri, 29 Dec 2023) $',
'Revision : $Revision: 18808 $',
'Requires : Application Express >= 21.1',
'',
'Version 4.6 Updates:',
'12/29/2023 Add attribution to the exported image.',
'12/01/2023 Raise an application error if this plugin item is not associated with a Map region.',
'11/16/2023 Initial Implementation.'))
,p_files_version=>180
);
wwv_flow_imp_shared.create_plugin_attribute(
 p_id=>wwv_flow_imp.id(352637955361428530)
,p_plugin_id=>wwv_flow_imp.id(352633889691403999)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>1
,p_display_sequence=>10
,p_prompt=>'Export Image Collection Name'
,p_attribute_type=>'TEXT'
,p_is_required=>true
,p_is_translatable=>false
,p_depending_on_attribute_id=>wwv_flow_imp.id(191964375520253636)
,p_depending_on_has_to_exist=>true
,p_depending_on_condition_type=>'EQUALS'
,p_depending_on_expression=>'collection'
,p_help_text=>'Name of Apex Collection to which the map image is exported.'
);
wwv_flow_imp_shared.create_plugin_attribute(
 p_id=>wwv_flow_imp.id(352638445921430398)
,p_plugin_id=>wwv_flow_imp.id(352633889691403999)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>2
,p_display_sequence=>20
,p_prompt=>'Image Format'
,p_attribute_type=>'SELECT LIST'
,p_is_required=>false
,p_default_value=>'image/png'
,p_is_translatable=>false
,p_lov_type=>'STATIC'
);
wwv_flow_imp_shared.create_plugin_attr_value(
 p_id=>wwv_flow_imp.id(352638808794431387)
,p_plugin_attribute_id=>wwv_flow_imp.id(352638445921430398)
,p_display_sequence=>10
,p_display_value=>'PNG (Portable Network Graphics)'
,p_return_value=>'image/png'
);
wwv_flow_imp_shared.create_plugin_attr_value(
 p_id=>wwv_flow_imp.id(352639204968434127)
,p_plugin_attribute_id=>wwv_flow_imp.id(352638445921430398)
,p_display_sequence=>20
,p_display_value=>'JPEG (Joint Photographic Experts Group)'
,p_return_value=>'image/jpeg'
);
wwv_flow_imp_shared.create_plugin_attribute(
 p_id=>wwv_flow_imp.id(191964375520253636)
,p_plugin_id=>wwv_flow_imp.id(352633889691403999)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>3
,p_display_sequence=>5
,p_prompt=>'Export Destination'
,p_attribute_type=>'SELECT LIST'
,p_is_required=>false
,p_default_value=>'collection'
,p_is_translatable=>false
,p_lov_type=>'STATIC'
);
wwv_flow_imp_shared.create_plugin_attr_value(
 p_id=>wwv_flow_imp.id(191967175431255346)
,p_plugin_attribute_id=>wwv_flow_imp.id(191964375520253636)
,p_display_sequence=>10
,p_display_value=>'Collection'
,p_return_value=>'collection'
,p_help_text=>'Upload the image to an APEX collection.'
);
wwv_flow_imp_shared.create_plugin_attr_value(
 p_id=>wwv_flow_imp.id(191967516966257335)
,p_plugin_attribute_id=>wwv_flow_imp.id(191964375520253636)
,p_display_sequence=>20
,p_display_value=>'Download'
,p_return_value=>'download'
,p_help_text=>'Download the image to the user''s computer.'
);
wwv_flow_imp_shared.create_plugin_attribute(
 p_id=>wwv_flow_imp.id(191971563997354571)
,p_plugin_id=>wwv_flow_imp.id(352633889691403999)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>4
,p_display_sequence=>10
,p_prompt=>'Filename Item'
,p_attribute_type=>'PAGE ITEM'
,p_is_required=>false
,p_is_translatable=>false
,p_depending_on_attribute_id=>wwv_flow_imp.id(191964375520253636)
,p_depending_on_has_to_exist=>true
,p_depending_on_condition_type=>'EQUALS'
,p_depending_on_expression=>'download'
,p_help_text=>'A page item containing the name to give the downloaded file.'
);
wwv_flow_imp_shared.create_plugin_event(
 p_id=>wwv_flow_imp.id(352652352135737797)
,p_plugin_id=>wwv_flow_imp.id(352633889691403999)
,p_name=>'mil_army_usace_mapbits_export_create'
,p_display_name=>'Map Export Completed'
);
end;
/
begin
wwv_flow_imp.g_varchar2_table := wwv_flow_imp.empty_varchar2_table;
wwv_flow_imp.g_varchar2_table(1) := '66756E6374696F6E206D6170626974735F6578706F727428652C742C6E2C6F297B66756E6374696F6E20692874297B617065782E6A5175657279282866756E6374696F6E28297B636F6E736F6C652E6C6F6728652B2220222B74297D29297D7661722072';
wwv_flow_imp.g_varchar2_table(2) := '3D6F2E636F6C6C656374696F6E2C613D6F2E666F726D61743B76617220633D617065782E726567696F6E286E293B6966286E756C6C3D3D632972657475726E20766F696420636F6E736F6C652E6C6F6728226D6170626974735F7A6F6F6D20222B652B22';
wwv_flow_imp.g_varchar2_table(3) := '203A20526567696F6E205B222B6E2B225D2069732068696464656E206F72206D697373696E672E22293B636F6E7374206C3D736574496E74657276616C282866756E6374696F6E28297B636F6E737420653D632E63616C6C28226765744D61704F626A65';
wwv_flow_imp.g_varchar2_table(4) := '637422293B766F69642030213D3D6526266E756C6C213D65262628636C656172496E74657276616C286C292C652E6F6E6365282272656E646572222C286173796E632066756E6374696F6E28297B76617220652C6C2C733D6177616974206173796E6320';
wwv_flow_imp.g_varchar2_table(5) := '66756E6374696F6E28297B636F6E737420653D632E63616C6C28226765744D61704F626A65637422292C743D646F63756D656E742E676574456C656D656E7442794964286E292E717565727953656C6563746F7228222E6D61706C69627265676C2D6361';
wwv_flow_imp.g_varchar2_table(6) := '6E76617322292C6F3D646F63756D656E742E637265617465456C656D656E74282263616E76617322293B6F2E77696474683D742E636C69656E7457696474682C6F2E6865696768743D742E636C69656E744865696768743B636F6E737420693D6F2E6765';
wwv_flow_imp.g_varchar2_table(7) := '74436F6E746578742822326422293B692E64726177496D61676528742C302C30293B636F6E737420723D5B2E2E2E41727261792E66726F6D286E65772053657428652E6765745374796C6528292E6C61796572732E66696C7465722828653D3E226E6F6E';
wwv_flow_imp.g_varchar2_table(8) := '6522213D3D652E6C61796F75743F2E7669736962696C69747929292E6D61702828653D3E652E736F7572636529292E66696C7465722828653D3E212165292929292E6D61702828743D3E652E676574536F757263652874292E6174747269627574696F6E';
wwv_flow_imp.g_varchar2_table(9) := '29292E66696C7465722828653D3E21216529292C632E636F707972696768744E6F746963655D2E6A6F696E2822207C2022292C6C3D286E657720444F4D506172736572292E706172736546726F6D537472696E6728722C22746578742F68746D6C22292E';
wwv_flow_imp.g_varchar2_table(10) := '626F64792E74657874436F6E74656E742E7265706C6163652822496D70726F76652074686973206D6170222C2222292E7265706C616365282F5C732B2F672C222022292E7472696D28293B692E666F6E743D22313270782073616E732D7365726966223B';
wwv_flow_imp.g_varchar2_table(11) := '636F6E737420733D692E6D65617375726554657874286C293B696628692E66696C6C5374796C653D2272676261283235352C203235352C203235352C20302E323529222C692E66696C6C52656374286F2E77696474682D732E77696474682D31302C6F2E';
wwv_flow_imp.g_varchar2_table(12) := '6865696768742D732E61637475616C426F756E64696E67426F78417363656E742D31302C732E77696474682B31302C732E666F6E74426F756E64696E67426F78417363656E742B3130292C692E66696C6C5374796C653D22626C61636B222C692E66696C';
wwv_flow_imp.g_varchar2_table(13) := '6C54657874286C2C6F2E77696474682D732E77696474682D352C6F2E6865696768742D35292C2273796D626F6C223D3D747970656F66204D4150424954535F424153454D41505F53594D424F4C297B636F6E737420743D655B4D4150424954535F424153';
wwv_flow_imp.g_varchar2_table(14) := '454D41505F53594D424F4C5D2E6174747269627574696F6E4C6F676F3B69662874297B636F6E737420653D6177616974206E65772050726F6D6973652828653D3E7B636F6E7374206E3D6E657720496D6167653B6E2E6F6E6C6F61643D28293D3E7B6528';
wwv_flow_imp.g_varchar2_table(15) := '6E297D2C6E2E7372633D742E75726C7D29293B692E64726177496D61676528652C6F2E77696474682D742E77696474682D352C6F2E6865696768742D732E61637475616C426F756E64696E67426F78417363656E742D31302D742E6865696768742C742E';
wwv_flow_imp.g_varchar2_table(16) := '77696474682C742E686569676874297D7D72657475726E206F2E746F4461746155524C2861297D28293B737769746368286F2E64657374696E6174696F6E297B6361736522636F6C6C656374696F6E223A733D732E73756273747228732E696E6465784F';
wwv_flow_imp.g_varchar2_table(17) := '6628222C22292B31292C653D732C226E6F742D616C6C6F776564223D3D286C3D646F63756D656E742E626F64792E7374796C652E637572736F72292626286C3D6E756C6C292C653F28646F63756D656E742E626F64792E7374796C652E637572736F723D';
wwv_flow_imp.g_varchar2_table(18) := '226E6F742D616C6C6F776564222C66756E6374696F6E2065286E2C6F2C632C6C297B6F3E3D6E2E6C656E6774683F617065782E7365727665722E706C7567696E28742C7B7831303A2257524954454241434B5F46494E495348222C7830313A727D2C7B73';
wwv_flow_imp.g_varchar2_table(19) := '7563636573733A66756E6374696F6E2865297B6C28297D2C6572726F723A66756E6374696F6E28652C742C6E297B692822596F75206661696C6974222B6E297D7D293A617065782E7365727665722E706C7567696E28742C7B7831303A22575249544542';
wwv_flow_imp.g_varchar2_table(20) := '41434B222C7830313A722C7830323A6E2E737562737472286F2C63292C7830333A6F2C7830343A617D2C7B737563636573733A66756E6374696F6E2874297B65286E2C6F2B632C632C6C297D2C6572726F723A66756E6374696F6E28652C742C6E297B69';
wwv_flow_imp.g_varchar2_table(21) := '286E297D7D297D28652C302C3365342C2866756E6374696F6E28297B646F63756D656E742E626F64792E7374796C652E637572736F723D6C2C617065782E6576656E742E7472696767657228617065782E6A5175657279282223222B6E292C226D696C5F';
wwv_flow_imp.g_varchar2_table(22) := '61726D795F75736163655F6D6170626974735F6578706F72745F63726561746522297D2929293A617065782E7365727665722E706C7567696E28742C7B7831303A2257524954454241434B222C7830313A722C7830323A6E756C6C2C7830333A6E756C6C';
wwv_flow_imp.g_varchar2_table(23) := '2C7830343A617D2C7B737563636573733A66756E6374696F6E2865297B646F63756D656E742E626F64792E7374796C652E637572736F723D6C7D2C6572726F723A66756E6374696F6E28652C742C6E297B646F63756D656E742E626F64792E7374796C65';
wwv_flow_imp.g_varchar2_table(24) := '2E637572736F723D6C2C69286E297D7D293B627265616B3B6361736522646F776E6C6F6164223A636F6E737420633D6F2E66696C656E616D654974656D3F2476286F2E66696C656E616D654974656D293F3F224578706F72746564204D6170223A224578';
wwv_flow_imp.g_varchar2_table(25) := '706F72746564204D6170223B2428223C613E222C7B687265663A732C646F776E6C6F61643A637D295B305D2E636C69636B28292C617065782E6576656E742E7472696767657228617065782E6A5175657279282223222B6E292C226D696C5F61726D795F';
wwv_flow_imp.g_varchar2_table(26) := '75736163655F6D6170626974735F6578706F72745F63726561746522297D7D29292C652E7265647261772829297D292C313030297D';
null;
end;
/
begin
wwv_flow_imp_shared.create_plugin_file(
 p_id=>wwv_flow_imp.id(197511430388155608)
,p_plugin_id=>wwv_flow_imp.id(352633889691403999)
,p_file_name=>'mapbits-export.min.js'
,p_mime_type=>'text/javascript'
,p_file_charset=>'utf-8'
,p_file_content=>wwv_flow_imp.varchar2_to_blob(wwv_flow_imp.g_varchar2_table)
);
end;
/
begin
wwv_flow_imp.g_varchar2_table := wwv_flow_imp.empty_varchar2_table;
wwv_flow_imp.g_varchar2_table(1) := '66756E6374696F6E206D6170626974735F6578706F727428705F616374696F6E5F69642C20705F616A61785F6964656E7469666965722C20705F726567696F6E5F69642C20705F6F7074696F6E7329207B200D0A20202F2F2072616973652061206A6176';
wwv_flow_imp.g_varchar2_table(2) := '6173637269707420616C65727420776974682074686520696E707574206D6573736167652C206D73672C20616E6420777269746520746F20636F6E736F6C652E0D0A202066756E6374696F6E20617065785F616C657274286D736729207B0D0A20202020';
wwv_flow_imp.g_varchar2_table(3) := '617065782E6A51756572792866756E6374696F6E28297B636F6E736F6C652E6C6F6728705F616374696F6E5F6964202B20222022202B206D7367293B7D293B0D0A20207D0D0A0D0A20202F2F204D616B65207661726961626C65732066726F6D20706C75';
wwv_flow_imp.g_varchar2_table(4) := '67696E20617474726962757465730D0A202076617220705F636F6C6C656374696F6E203D20705F6F7074696F6E735B27636F6C6C656374696F6E275D3B0D0A202076617220705F666F726D6174203D20705F6F7074696F6E735B27666F726D6174275D3B';
wwv_flow_imp.g_varchar2_table(5) := '0D0A0D0A20202F2A0D0A2020202A2063616C6C20616A61782073657276696365206F662074686520706C7567696E20776974682074686520696E70757420696D61676520746F207772697465206974206261636B20746F20746865207061676520697465';
wwv_flow_imp.g_varchar2_table(6) := '6D20616E6420696E70757420696D61676520636F6C6C656374696F6E0D0A2020202A206173206261736536342E204C6172676520646174612069732073747265616D65642E0D0A2020202A2F0D0A202066756E6374696F6E207772697465496D61676528';
wwv_flow_imp.g_varchar2_table(7) := '696D61676529207B0D0A202020207661722064656661756C745F637572736F72203D20646F63756D656E742E626F64792E7374796C652E637572736F723B0D0A202020206966202864656661756C745F637572736F72203D3D20226E6F742D616C6C6F77';
wwv_flow_imp.g_varchar2_table(8) := '65642229207B0D0A20202020202064656661756C745F637572736F72203D206E756C6C3B0D0A0920207D0D0A202020206966202821696D61676529207B0D0A202020202020617065782E7365727665722E706C7567696E28705F616A61785F6964656E74';
wwv_flow_imp.g_varchar2_table(9) := '69666965722C207B0D0A20202020202020207831303A202257524954454241434B222C0D0A20202020202020207830313A20705F636F6C6C656374696F6E2C0D0A20202020202020207830323A206E756C6C2C0D0A20202020202020207830333A206E75';
wwv_flow_imp.g_varchar2_table(10) := '6C6C2C0D0A20202020202020207830343A20705F666F726D61740D0A2020202020207D2C207B0D0A2020202020202020737563636573733A2066756E6374696F6E2028704461746129207B0D0A20202020202020202020646F63756D656E742E626F6479';
wwv_flow_imp.g_varchar2_table(11) := '2E7374796C652E637572736F72203D2064656661756C745F637572736F723B0D0A20202020202020207D2C0D0A20202020202020206572726F723A2066756E6374696F6E20286A717868722C207374617475732C2065727229207B0D0A20202020202020';
wwv_flow_imp.g_varchar2_table(12) := '202020646F63756D656E742E626F64792E7374796C652E637572736F72203D2064656661756C745F637572736F723B0D0A20202020202020202020617065785F616C65727428657272293B0D0A20202020202020207D0D0A2020202020207D293B0D0A20';
wwv_flow_imp.g_varchar2_table(13) := '2020207D20656C7365207B0D0A2020202020202F2F2074686973206461746120636F756C64206265206269672E204C657427732073747265616D206974206261636B20746F20746865207365727665720D0A2020202020202F2F20696620776520617265';
wwv_flow_imp.g_varchar2_table(14) := '20686F6C64696E6720697420696E206120636F6C6C656374696F6E2074686572652E20646F2074686973207468726F7567680D0A2020202020202F2F20636861696E656420616A61782063616C6C732E207573652074686520637572736F722069636F6E';
wwv_flow_imp.g_varchar2_table(15) := '20746F206C65742075736572206B6E6F770D0A2020202020202F2F20746861742064617461206973206265696E67207472616E736665727265642E0D0A20202020202066756E6374696F6E206368756E6B28646174612C207374617274496E6465782C20';
wwv_flow_imp.g_varchar2_table(16) := '6275666665724C656E2C207375636365737346756E6329207B0D0A2020202020202020696620287374617274496E646578203E3D20646174612E6C656E67746829207B0D0A20202020202020202020617065782E7365727665722E706C7567696E28705F';
wwv_flow_imp.g_varchar2_table(17) := '616A61785F6964656E7469666965722C207B0D0A2020202020202020202020207831303A202257524954454241434B5F46494E495348222C0D0A2020202020202020202020207830313A20705F636F6C6C656374696F6E0D0A202020202020202020207D';
wwv_flow_imp.g_varchar2_table(18) := '2C200D0A202020202020202020207B0D0A202020202020202020202020737563636573733A2066756E6374696F6E2028704461746129207B0D0A20202020202020202020202020207375636365737346756E6328293B0D0A202020202020202020202020';
wwv_flow_imp.g_varchar2_table(19) := '7D2C0D0A2020202020202020202020206572726F723A2066756E6374696F6E20286A717868722C207374617475732C2065727229207B0D0A2020202020202020202020202020617065785F616C6572742827596F75206661696C697427202B2065727229';
wwv_flow_imp.g_varchar2_table(20) := '3B0D0A2020202020202020202020207D0D0A202020202020202020207D293B0D0A20202020202020207D20656C7365207B0D0A20202020202020202020617065782E7365727665722E706C7567696E28705F616A61785F6964656E7469666965722C207B';
wwv_flow_imp.g_varchar2_table(21) := '0D0A2020202020202020202020207831303A202257524954454241434B222C0D0A2020202020202020202020207830313A20705F636F6C6C656374696F6E2C0D0A2020202020202020202020207830323A20646174612E73756273747228737461727449';
wwv_flow_imp.g_varchar2_table(22) := '6E6465782C206275666665724C656E292C0D0A2020202020202020202020207830333A207374617274496E6465782C0D0A2020202020202020202020207830343A20705F666F726D61740D0A202020202020202020207D2C200D0A202020202020202020';
wwv_flow_imp.g_varchar2_table(23) := '207B0D0A202020202020202020202020737563636573733A2066756E6374696F6E2028704461746129207B0D0A20202020202020202020202020206368756E6B28646174612C207374617274496E646578202B206275666665724C656E2C206275666665';
wwv_flow_imp.g_varchar2_table(24) := '724C656E2C207375636365737346756E63293B0D0A2020202020202020202020207D2C0D0A2020202020202020202020206572726F723A2066756E6374696F6E20286A717868722C207374617475732C2065727229207B0D0A2020202020202020202020';
wwv_flow_imp.g_varchar2_table(25) := '202020617065785F616C65727428657272293B0D0A2020202020202020202020207D0D0A202020202020202020207D293B0D0A20202020202020207D0D0A2020202020207D0D0A202020202020646F63756D656E742E626F64792E7374796C652E637572';
wwv_flow_imp.g_varchar2_table(26) := '736F72203D20226E6F742D616C6C6F776564223B0D0A2020202020206368756E6B28696D6167652C20302C2033303030302C2066756E6374696F6E202829207B200D0A20202020202020202F2F206F6E63652074686520777269746520697320636F6D70';
wwv_flow_imp.g_varchar2_table(27) := '6C6574652C20726573746F72652074686520637572736F7220616E64207472696767657220616E206576656E7420746F206265207573656420696E20415045582E0D0A2020202020202020646F63756D656E742E626F64792E7374796C652E637572736F';
wwv_flow_imp.g_varchar2_table(28) := '72203D2064656661756C745F637572736F723B200D0A2020202020202020617065782E6576656E742E7472696767657228617065782E6A517565727928222322202B20705F726567696F6E5F6964292C20226D696C5F61726D795F75736163655F6D6170';
wwv_flow_imp.g_varchar2_table(29) := '626974735F6578706F72745F63726561746522293B0D0A2020202020207D293B0D0A202020207D0D0A20207D0D0A20200D0A20202F2F206765742074686520726567696F6E206F626A6563742E20427265616B206F7574206966206974206973206E6F74';
wwv_flow_imp.g_varchar2_table(30) := '2072656E64657265642E0D0A202076617220726567696F6E203D20617065782E726567696F6E28705F726567696F6E5F6964293B0D0A202069662028726567696F6E203D3D206E756C6C29207B0D0A20202020636F6E736F6C652E6C6F6728276D617062';
wwv_flow_imp.g_varchar2_table(31) := '6974735F7A6F6F6D2027202B20705F616374696F6E5F6964202B2027203A20526567696F6E205B27202B20705F726567696F6E5F6964202B20275D2069732068696464656E206F72206D697373696E672E27293B0D0A2020202072657475726E3B0D0A20';
wwv_flow_imp.g_varchar2_table(32) := '207D0D0A0D0A20206173796E632066756E6374696F6E206765744461746155726C2829207B0D0A202020202020636F6E7374206D6170203D20726567696F6E2E63616C6C28226765744D61704F626A65637422293B0D0A202020202020636F6E7374206D';
wwv_flow_imp.g_varchar2_table(33) := '61706C6962726543616E766173203D20646F63756D656E742E676574456C656D656E744279496428705F726567696F6E5F6964292E717565727953656C6563746F7228272E6D61706C69627265676C2D63616E76617327293B0D0A0D0A2020202020202F';
wwv_flow_imp.g_varchar2_table(34) := '2A2044726177206174747269627574696F6E2074657874202A2F0D0A202020202020636F6E73742063616E766173203D20646F63756D656E742E637265617465456C656D656E74282763616E76617327293B0D0A20202020202063616E7661732E776964';
wwv_flow_imp.g_varchar2_table(35) := '7468203D206D61706C6962726543616E7661732E636C69656E7457696474683B0D0A20202020202063616E7661732E686569676874203D206D61706C6962726543616E7661732E636C69656E744865696768743B0D0A202020202020636F6E7374206374';
wwv_flow_imp.g_varchar2_table(36) := '78203D2063616E7661732E676574436F6E746578742827326427293B0D0A2020202020206374782E64726177496D616765286D61706C6962726543616E7661732C20302C2030293B0D0A202020202020636F6E7374206174747269627574696F6E73203D';
wwv_flow_imp.g_varchar2_table(37) := '2041727261792E66726F6D286E657720536574280D0A202020202020202020206D61700D0A2020202020202020202020202E6765745374796C6528290D0A2020202020202020202020202E6C61796572730D0A2020202020202020202020202E66696C74';
wwv_flow_imp.g_varchar2_table(38) := '65722878203D3E20782E6C61796F75743F2E7669736962696C69747920213D3D20276E6F6E6527290D0A2020202020202020202020202E6D6170286C203D3E206C2E736F75726365290D0A2020202020202020202020202E66696C7465722878203D3E20';
wwv_flow_imp.g_varchar2_table(39) := '212178290D0A202020202020202029290D0A20202020202020202E6D61702878203D3E206D61702E676574536F757263652878292E6174747269627574696F6E290D0A20202020202020202E66696C7465722878203D3E20212178293B0D0A2020202020';
wwv_flow_imp.g_varchar2_table(40) := '20636F6E7374206174747269627574696F6E48746D6C203D205B2E2E2E6174747269627574696F6E732C20726567696F6E2E636F707972696768744E6F746963655D2E6A6F696E2827207C2027293B0D0A202020202020636F6E73742061747472696275';
wwv_flow_imp.g_varchar2_table(41) := '74696F6E203D206E657720444F4D50617273657228292E706172736546726F6D537472696E67286174747269627574696F6E48746D6C2C2027746578742F68746D6C27292E626F64792E74657874436F6E74656E742E7265706C6163652827496D70726F';
wwv_flow_imp.g_varchar2_table(42) := '76652074686973206D6170272C202727292E7265706C616365282F5C732B2F672C20272027292E7472696D28293B0D0A2020202020206374782E666F6E74203D2027313270782073616E732D7365726966273B0D0A202020202020636F6E737420746578';
wwv_flow_imp.g_varchar2_table(43) := '744D657472696373203D206374782E6D65617375726554657874286174747269627574696F6E293B0D0A202020202020636F6E73742070616464696E67203D20353B0D0A2020202020206374782E66696C6C5374796C65203D202772676261283235352C';
wwv_flow_imp.g_varchar2_table(44) := '203235352C203235352C20302E323529273B0D0A2020202020206374782E66696C6C526563742863616E7661732E7769647468202D20746578744D6574726963732E7769647468202D2070616464696E67202A20322C2063616E7661732E686569676874';
wwv_flow_imp.g_varchar2_table(45) := '202D20746578744D6574726963732E61637475616C426F756E64696E67426F78417363656E74202D2070616464696E67202A20322C20746578744D6574726963732E7769647468202B2070616464696E67202A20322C20746578744D6574726963732E66';
wwv_flow_imp.g_varchar2_table(46) := '6F6E74426F756E64696E67426F78417363656E74202B2070616464696E67202A2032290D0A2020202020206374782E66696C6C5374796C65203D2027626C61636B273B0D0A2020202020206374782E66696C6C54657874286174747269627574696F6E2C';
wwv_flow_imp.g_varchar2_table(47) := '2063616E7661732E7769647468202D20746578744D6574726963732E7769647468202D2070616464696E672C2063616E7661732E686569676874202D2070616464696E67293B0D0A0D0A20202020202069662028747970656F66284D4150424954535F42';
wwv_flow_imp.g_varchar2_table(48) := '4153454D41505F53594D424F4C29203D3D3D202773796D626F6C2729207B0D0A2020202020202020636F6E7374206174747269627574696F6E4C6F676F203D206D61705B4D4150424954535F424153454D41505F53594D424F4C5D2E6174747269627574';
wwv_flow_imp.g_varchar2_table(49) := '696F6E4C6F676F3B0D0A2020202020202020696620286174747269627574696F6E4C6F676F29207B0D0A20202020202020202020636F6E737420696D616765203D206177616974206E65772050726F6D69736528287265736F6C766529203D3E207B0D0A';
wwv_flow_imp.g_varchar2_table(50) := '202020202020202020202020636F6E737420696D616765203D206E657720496D61676528293B0D0A202020202020202020202020696D6167652E6F6E6C6F6164203D202829203D3E207B0D0A20202020202020202020202020207265736F6C766528696D';
wwv_flow_imp.g_varchar2_table(51) := '616765293B0D0A2020202020202020202020207D3B0D0A202020202020202020202020696D6167652E737263203D206174747269627574696F6E4C6F676F2E75726C3B0D0A202020202020202020207D293B0D0A0D0A202020202020202020206374782E';
wwv_flow_imp.g_varchar2_table(52) := '64726177496D616765280D0A202020202020202020202020696D6167652C0D0A20202020202020202020202063616E7661732E7769647468202D206174747269627574696F6E4C6F676F2E7769647468202D2070616464696E672C0D0A20202020202020';
wwv_flow_imp.g_varchar2_table(53) := '202020202063616E7661732E686569676874202D20746578744D6574726963732E61637475616C426F756E64696E67426F78417363656E74202D2070616464696E67202A2032202D206174747269627574696F6E4C6F676F2E6865696768742C0D0A2020';
wwv_flow_imp.g_varchar2_table(54) := '202020202020202020206174747269627574696F6E4C6F676F2E77696474682C0D0A2020202020202020202020206174747269627574696F6E4C6F676F2E6865696768740D0A20202020202020202020293B0D0A20202020202020207D0D0A2020202020';
wwv_flow_imp.g_varchar2_table(55) := '207D0D0A0D0A20202020202072657475726E2063616E7661732E746F4461746155524C28705F666F726D6174293B0D0A20207D0D0A0D0A20202F2F2049746572617465206F7665722063616C6C7320746F20276765744D61704F626A6563742720756E74';
wwv_flow_imp.g_varchar2_table(56) := '696C2077652067657420746865206D61702E200D0A2020636F6E737420696E74657276616C203D20736574496E74657276616C2866756E6374696F6E2829207B0D0A20202020636F6E7374206D6170203D20726567696F6E2E63616C6C28226765744D61';
wwv_flow_imp.g_varchar2_table(57) := '704F626A65637422293B0D0A2020202069662028747970656F66206D6170203D3D3D2027756E646566696E656427207C7C206D6170203D3D206E756C6C29207B2020200D0A20202020202072657475726E3B20200D0A202020207D0D0A20202020636C65';
wwv_flow_imp.g_varchar2_table(58) := '6172496E74657276616C28696E74657276616C293B0D0A202020206D61702E6F6E6365282772656E646572272C206173796E632066756E6374696F6E2829207B0D0A202020202020766172206D6170496D616765203D2061776169742067657444617461';
wwv_flow_imp.g_varchar2_table(59) := '55726C28293B0D0A0D0A2020202020207377697463682028705F6F7074696F6E732E64657374696E6174696F6E29207B0D0A2020202020202020636173652027636F6C6C656374696F6E273A0D0A202020202020202020206D6170496D616765203D206D';
wwv_flow_imp.g_varchar2_table(60) := '6170496D6167652E737562737472286D6170496D6167652E696E6465784F6628272C2729202B2031293B0D0A202020202020202020207772697465496D616765286D6170496D616765293B0D0A20202020202020202020627265616B3B0D0A2020202020';
wwv_flow_imp.g_varchar2_table(61) := '202020636173652027646F776E6C6F6164273A0D0A20202020202020202020636F6E737420646F776E6C6F6164203D20705F6F7074696F6E732E66696C656E616D654974656D203F2028247628705F6F7074696F6E732E66696C656E616D654974656D29';
wwv_flow_imp.g_varchar2_table(62) := '203F3F20274578706F72746564204D61702729203A20274578706F72746564204D6170273B0D0A20202020202020202020636F6E73742061203D202428273C613E272C207B0D0A202020202020202020202020687265663A206D6170496D6167652C0D0A';
wwv_flow_imp.g_varchar2_table(63) := '202020202020202020202020646F776E6C6F61642C0D0A202020202020202020207D293B0D0A20202020202020202020615B305D2E636C69636B28293B0D0A20202020202020202020617065782E6576656E742E7472696767657228617065782E6A5175';
wwv_flow_imp.g_varchar2_table(64) := '65727928222322202B20705F726567696F6E5F6964292C20226D696C5F61726D795F75736163655F6D6170626974735F6578706F72745F63726561746522293B0D0A20202020202020202020627265616B3B0D0A2020202020207D0D0A202020207D293B';
wwv_flow_imp.g_varchar2_table(65) := '0D0A202020206D61702E72656472617728293B0D0A20207D2C313030293B0D0A7D0D0A';
null;
end;
/
begin
wwv_flow_imp_shared.create_plugin_file(
 p_id=>wwv_flow_imp.id(352636085574404007)
,p_plugin_id=>wwv_flow_imp.id(352633889691403999)
,p_file_name=>'mapbits-export.js'
,p_mime_type=>'text/javascript'
,p_file_charset=>'utf-8'
,p_file_content=>wwv_flow_imp.varchar2_to_blob(wwv_flow_imp.g_varchar2_table)
);
end;
/
prompt --application/end_environment
begin
wwv_flow_imp.import_end(p_auto_install_sup_obj => nvl(wwv_flow_application_install.get_auto_install_sup_obj, false));
commit;
end;
/
set verify on feedback on define on
prompt  ...done
