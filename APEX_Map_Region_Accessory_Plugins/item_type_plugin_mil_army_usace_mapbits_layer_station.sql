prompt --application/set_environment
set define off verify off feedback off
whenever sqlerror exit sql.sqlcode rollback
--------------------------------------------------------------------------------
--
-- ORACLE Application Express (APEX) export file
--
-- You should run the script connected to SQL*Plus as the Oracle user
-- APEX_210100 or as the owner (parsing schema) of the application.
--
-- NOTE: Calls to apex_application_install override the defaults below.
--
--------------------------------------------------------------------------------
begin
wwv_flow_api.import_begin (
 p_version_yyyy_mm_dd=>'2021.04.15'
,p_release=>'21.1.0'
,p_default_workspace_id=>2612926235066099
,p_default_application_id=>107981
,p_default_id_offset=>197864740331967674
,p_default_owner=>'MVDGIS'
);
end;
/
 
prompt APPLICATION 107981 - Mapbits Demo
--
-- Application Export:
--   Application:     107981
--   Name:            Mapbits Demo
--   Date and Time:   08:11 Wednesday December 7, 2022
--   Exported By:     GREP
--   Flashback:       0
--   Export Type:     Component Export
--   Manifest
--     PLUGIN: 408526742970976255
--   Manifest End
--   Version:         21.1.0
--   Instance ID:     61817619049184
--

begin
  -- replace components
  wwv_flow_api.g_mode := 'REPLACE';
end;
/
prompt --application/shared_components/plugins/item_type/mil_army_usace_mapbits_layer_station
begin
wwv_flow_api.create_plugin(
 p_id=>wwv_flow_api.id(408526742970976255)
,p_plugin_type=>'ITEM TYPE'
,p_name=>'MIL.ARMY.USACE.MAPBITS.LAYER.STATION'
,p_display_name=>'Mapbits Stationing Layer'
,p_supported_ui_types=>'DESKTOP'
,p_supported_component_types=>'APEX_APPLICATION_PAGE_ITEMS:APEX_APPL_PAGE_IG_COLUMNS'
,p_javascript_file_urls=>'#PLUGIN_FILES#mapbits-station.js'
,p_plsql_code=>wwv_flow_string.join(wwv_flow_t_varchar2(
'procedure mapbits_station_ajax (',
'    p_item   in            apex_plugin.t_item,',
'    p_plugin in            apex_plugin.t_plugin,',
'    p_param  in            apex_plugin.t_item_ajax_param,',
'    p_result in out nocopy apex_plugin.t_item_ajax_result ) is',
'  i integer;',
'  gjs clob;',
'  l_geom sdo_geometry;',
'  l_cursor integer;',
'  l_ignore integer;',
'  minw number;',
'  maxw number;',
'  temp varchar2(400);',
'',
'  type stringarray is varray(5) of varchar2(40);',
'  l_bindvars stringarray;',
'begin',
'  -- Check the number of bind variable in the query. We can handle 5 or less. Use regular expression to find them.',
'  if regexp_count(p_item.attribute_03, ''(:[A-Za-z0-9_]+)'') > 5 then',
'    raise_application_error(-20115, ''Map Stationing Layer: Too many bind variable used in SQL Query. Use 5 or less.'');',
'  end if;',
'',
'  -- Evaluate the query using dbms_sql. Query should return one sdo_geometry value.',
'  -- Set l_geom with that value. Find the substituion variables with regular expressions and bind them.',
'  l_cursor := dbms_sql.open_cursor;',
'  dbms_sql.parse(l_cursor, p_item.attribute_03, dbms_sql.native);',
'  dbms_sql.define_column(l_cursor, 1, l_geom); ',
'  l_bindvars := stringarray('''', '''', '''', '''', '''');',
'',
'  select regexp_substr(p_item.attribute_03, ''(:[A-Za-z0-9_]+)'', 1, 1, null, 1) , ',
'         regexp_substr(p_item.attribute_03, ''(:[A-Za-z0-9_]+)'', 1, 2, null, 1) ,',
'         regexp_substr(p_item.attribute_03, ''(:[A-Za-z0-9_]+)'', 1, 3, null, 1) ,',
'         regexp_substr(p_item.attribute_03, ''(:[A-Za-z0-9_]+)'', 1, 4, null, 1) ,',
'         regexp_substr(p_item.attribute_03, ''(:[A-Za-z0-9_]+)'', 1, 5, null, 1) into l_bindvars(1), l_bindvars(2), l_bindvars(3), l_bindvars(4), l_bindvars(5)',
'         from dual;  ',
'  for i in 1..5 loop',
'    if not l_bindvars(i) is null then',
'      dbms_sql.bind_variable(l_cursor, l_bindvars(i), V(replace(l_bindvars(i), '':'','''')));',
'    end if;',
'  end loop;',
'  l_ignore := dbms_sql.execute(l_cursor); ',
'  if dbms_sql.fetch_rows(l_cursor) >0 then',
'    dbms_sql.column_value(l_cursor, 1, l_geom);',
'  else ',
'    raise NO_DATA_FOUND;',
'  end if;',
'  dbms_sql.close_cursor(l_cursor);',
'  ',
'  -- get the minimum and maximum stations f the geometry in l_geom. They are used to clamp the station lookup.',
'  select nvl(min(w), min(z)), nvl(max(w), max(z)) into minw, maxw from ',
'    table(sdo_util.getvertices(l_geom));',
'  --if minw = 0 and maxw = 0 then',
'  --  select min(z), max(z) into minw, maxw from ',
'  --    table(sdo_util.getvertices(l_geom));',
'  --end if;',
'',
'  select stats.column_value || '' ['' || minw || ''] ['' || maxw || '']''',
'    --greatest(least(cast(stats.column_value as number), maxw), minw) ',
'    into temp from table(apex_string.split(apex_application.g_x01, '','')) stats where rownum = 1;',
'  --raise_application_error(-20000, ''stat = '' || temp);',
'  -- build geojson output. Stations are input as a comma separated list (''1000,2000,3000''). Split the list and lookup the coordinates in the l_geom geometry.',
'  -- If a station value is out of range, use the station minimum or maximum for the lookup. Output features include point coordinate and a station property with',
'  -- the station string.',
'  select json_object(',
'    ''type'' value ''FeatureCollection'', ',
'    ''features'' value json_arrayagg(',
'      json_object(''properties'' value json_object(''station''  value trunc(column_value, -2) / 100 || ''+'' || lpad(column_value - trunc(column_value, -2),2, 0)), ',
'      ''geometry'' value sdo_util.to_geojson(sdo_cs.make_2d(SDO_LRS.LOCATE_PT(l_geom, greatest(least(cast(stats.column_value as number), maxw), minw)))) FORMAT JSON))) into gjs from ',
'    table(apex_string.split(apex_application.g_x01, '','')) stats;',
'  htp.p(gjs);',
'end;',
'',
'procedure map_station_render (',
'    p_item   in            apex_plugin.t_item,',
'    p_plugin in            apex_plugin.t_plugin,',
'    p_param  in            apex_plugin.t_item_render_param,',
'    p_result in out nocopy apex_plugin.t_item_render_result ) is',
'    l_region_id varchar2(400);',
'    l_page_id integer;',
'    l_sequence_no apex_application_page_items.display_sequence%type;',
'    l_chart_id varchar2(200) := p_item.attribute_02;',
'    l_error varchar2(1000);',
'    l_ncharts integer;',
'begin',
'  -- Get the map region id for which this item is associated. If this failed, propagate an error.',
'  begin',
'    select nvl(r.static_id, ''R'' || r.region_id), i.display_sequence, i.page_id into l_region_id, l_sequence_no, l_page_id ',
'      from apex_application_page_items i ',
'      inner join apex_application_page_regions r on i.region_id = r.region_id ',
'      where i.item_id = p_item.id and r.source_type = ''Map'';',
'  exception',
'    when NO_DATA_FOUND then ',
'      apex_debug.message(',
'        p_message => ''Configuration ERROR: Mapbits Drawing Item [%s] is not associated with a Map region.'',',
'        p0      => p_item.name,',
'        p_level   => apex_debug.c_log_level_error',
'      );',
'      l_error := l_error || ''Configuration ERROR: Mapbits Drawing Item ['' || p_item.name || ''] is not associated with a Map region.'';',
'  end;',
'  -- get the chart id if the user doesn''t specify the chart region id. If there is only one chart on the page, use that. If there are two, ',
'  -- raise an error telling the user to specify the chart region id. If there is no chart, raise an error that there is no chart.',
'  if l_chart_id is null then',
'    select count(*) into l_ncharts ',
'      from apex_application_page_regions r',
'      where source_type_plugin_name = ''NATIVE_JET_CHART'' and page_id = l_page_id and application_id = :APP_ID;',
'    if l_ncharts > 1 then',
'      apex_debug.message(',
'        p_message => ''ERROR: Map Stationing ['' || p_item.name || ''] can not be associated to a chart. There is more than one on the page. Set the plugin chart id to the chart static id.'',',
'        p0      => p_item.name,',
'        p_level   => apex_debug.c_log_level_error',
'      );',
'      l_error := l_error || ''ERROR: Map Stationing ['' || p_item.name || ''] can not be associated to a chart. There is more than one on the page. Set the plugin chart id to the chart static id.'';',
'    elsif l_ncharts = 0 then',
'      apex_debug.message(',
'        p_message => ''ERROR: Map Stationing ['' || p_item.name || ''] can not be associated to a chart. There is no chart on the page.'',',
'        p0      => p_item.name,',
'        p_level   => apex_debug.c_log_level_error',
'      );',
'      l_error := l_error || ''ERROR: Map Stationing ['' || p_item.name || ''] can not be associated to a chart. There is no chart on the page.'';',
'    else',
'      -- Get the chart region.',
'      select nvl(r.static_id, ''R'' || r.region_id) into l_chart_id ',
'      from apex_application_page_regions r',
'      where source_type_plugin_name = ''NATIVE_JET_CHART'' and page_id = l_page_id and application_id = :APP_ID;',
'    end if;',
'  end if;',
'',
'  -- item placeholder',
'  htp.p(''<div id="'' || p_item.name || ''" name="'' || p_item.name || ''"></div>'');',
'',
'  -- Call the javascript',
'  apex_javascript.add_onload_code(p_code => ''apex.jQuery(apex.gPageContext$).on("apexreadyend", function(){',
'    mapbits_station("'' || p_item.name || ''", "'' || apex_plugin.get_ajax_identifier || ''", "'' || l_region_id || ''", "'' || l_sequence_no || ''", "'' || l_chart_id || ''", {"icon" : "'' || p_plugin.file_prefix  || ''cross.png"});',
'    });'', p_key => ''MIL.ARMY.USACE.MAPBITS.LAYER.STATION'');',
'end;'))
,p_api_version=>2
,p_render_function=>'map_station_render'
,p_ajax_function=>'mapbits_station_ajax'
,p_substitute_attributes=>true
,p_subscribe_plugin_settings=>true
,p_help_text=>wwv_flow_string.join(wwv_flow_t_varchar2(
'Add a Mapbits Stationing plugin to a map region to show station labels based on visible domain values in a chart region. As the chart region viewport changes, so shall',
'the station labels on the map. You will need to specify a query that returns a line sdo_geometry with measure values (4d) and if you have more than one chart, you will have',
'to specify the chart id.'))
,p_version_identifier=>'4.3.20221207'
,p_about_url=>'https://github.com/darklordgrep/Mapbits'
,p_plugin_comment=>wwv_flow_string.join(wwv_flow_t_varchar2(
'Module   : Mapbits 4 - Stationing',
'Location : $Id: item_type_plugin_mil_army_usace_mapbits_layer_station.sql 17629 2022-12-07 14:13:43Z b2imimcf $',
'Date     : $Date: 2022-12-07 08:13:43 -0600 (Wed, 07 Dec 2022) $',
'Revision : $Revision: 17629 $',
'Requires : Application Express >= 21.1',
'',
'Version 4.3 Updates',
'8/13/2022 Modified to work with both mapbox and maplibre.',
'',
'12/7/2022 Fixed hard coded reference to region. Added missing sequence parameter.'))
,p_files_version=>121
);
wwv_flow_api.create_plugin_attribute(
 p_id=>wwv_flow_api.id(211524813783824402)
,p_plugin_id=>wwv_flow_api.id(408526742970976255)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>2
,p_display_sequence=>20
,p_prompt=>'Chart Region Id'
,p_attribute_type=>'TEXT'
,p_is_required=>false
,p_is_translatable=>false
,p_help_text=>'If your page has more than one chart, set the ''Static Id'' of the chart region to use for stationing and set this attribute to that static id.'
);
wwv_flow_api.create_plugin_attribute(
 p_id=>wwv_flow_api.id(290191386433999039)
,p_plugin_id=>wwv_flow_api.id(408526742970976255)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>3
,p_display_sequence=>10
,p_prompt=>'Station Lines Query'
,p_attribute_type=>'SQL'
,p_is_required=>false
,p_sql_min_column_count=>1
,p_sql_max_column_count=>1
,p_is_translatable=>false
,p_help_text=>'Query that returns a single sdo_geometry with a stationed (4d) line. That line will be used to determine point locations based on visible chart station values.'
);
end;
/
begin
wwv_flow_api.g_varchar2_table := wwv_flow_api.empty_varchar2_table;
wwv_flow_api.g_varchar2_table(1) := '66756E6374696F6E206D6170626974735F73746174696F6E28705F6974656D5F69642C20705F616A61785F6964656E7469666965722C20705F726567696F6E5F69642C20705F73657175656E63652C20705F63686172745F69642C20705F6F7074696F6E';
wwv_flow_api.g_varchar2_table(2) := '7329207B0D0A2020766172206D61706C6962203D20747970656F66206D61706C69627265676C203D3D3D2027756E646566696E656427203F206D6170626F78676C203A206D61706C69627265676C3B090D0A20200D0A20202F2F2072616973652061206A';
wwv_flow_api.g_varchar2_table(3) := '61766173637269707420616C65727420776974682074686520696E707574206D65737361676520616E6420777269746520746F20636F6E736F6C652E0D0A202066756E6374696F6E20617065785F616C657274286D736729207B0D0A2020202061706578';
wwv_flow_api.g_varchar2_table(4) := '2E6A51756572792866756E6374696F6E28297B617065782E6D6573736167652E616C657274286D7367293B636F6E736F6C652E6C6F67286D7367293B7D293B0D0A20207D0D0A20200D0A2020766172206D6170203D20617065782E726567696F6E28705F';
wwv_flow_api.g_varchar2_table(5) := '726567696F6E5F6964292E63616C6C28226765744D61704F626A65637422293B0D0A2020766172206D61726B657273203D205B5D3B0D0A2020766172206C6162656C436C617373203D202273746174696F6E5F22202B20705F6974656D5F69643B0D0A20';
wwv_flow_api.g_varchar2_table(6) := '200D0A20202F2F6C6F6164207468652073746174696F6E2069636F6E0D0A20206D61702E6F6E28276C6F6164272C2066756E6374696F6E2829207B0D0A202020206D61702E6C6F6164496D61676528705F6F7074696F6E732E69636F6E2C2066756E6374';
wwv_flow_api.g_varchar2_table(7) := '696F6E286572726F722C20696D61676529207B20200D0A202020202020696620286572726F7229207B0D0A2020202020202020617065785F616C6572742827436F6E66696775726174696F6E204572726F723A204C61796572205B27202B20705F697465';
wwv_flow_api.g_varchar2_table(8) := '6D5F6964202B20275D2049636F6E20206661696C656420746F206C6F61642E2027293B0D0A202020202020202072657475726E3B0D0A2020202020207D0D0A2020202020206D61702E616464496D61676528277374617469636F6E5F27202B20705F6974';
wwv_flow_api.g_varchar2_table(9) := '656D5F69642C20696D6167652C207B0D0A202020202020202022736466223A202274727565220D0A2020202020207D293B0D0A202020207D293B0D0A20207D293B0D0A20200D0A20202F2F20436F6E6669677572652073746174696F6E206C6162656C65';
wwv_flow_api.g_varchar2_table(10) := '722E20416464206120706C7573207369676E2E2045782E2031303030202D3E2031302B30302E0D0A20207661722053746174696F6E436F6E766572746572203D207B0D0A20202020666F726D61743A2066756E6374696F6E2876616C756529207B0D0A20';
wwv_flow_api.g_varchar2_table(11) := '20202020207661722074656E73203D202876616C7565202D20313030202A204D6174682E666C6F6F722876616C7565202F203130302929203C203130203F20273027203A2027273B2020200D0A20202020202072657475726E204D6174682E666C6F6F72';
wwv_flow_api.g_varchar2_table(12) := '2876616C7565202F2031303029202B20222B22202B2074656E7320202B202876616C7565202D20313030202A204D6174682E666C6F6F722876616C7565202F2031303029293B0D0A202020207D0D0A20207D3B20200D0A2020617065782E6A5175657279';
wwv_flow_api.g_varchar2_table(13) := '28272327202B20705F63686172745F6964292E6F6E282761706578616674657272656672657368272C2066756E6374696F6E28297B0D0A20202020617065782E726567696F6E28705F63686172745F6964292E77696467657428292E6F6A436861727428';
wwv_flow_api.g_varchar2_table(14) := '226F7074696F6E222C2278417869732E7469636B4C6162656C2E636F6E766572746572222C2053746174696F6E436F6E76657274657220293B20200D0A20207D293B0D0A20200D0A202066756E6374696F6E2073746174696F6E28297B0D0A202020202F';
wwv_flow_api.g_varchar2_table(15) := '2F204920636F756C646E27742066696E6420616E20746F207369676E616C207768656E207468652063686172742066696E69736865732072656E646572696E672E20496E73746561642C2075736520736574496E74657276616C20756E74696C200D0A20';
wwv_flow_api.g_varchar2_table(16) := '2020202F2F20782061786973206C6162656C732061726520666F756E642E0D0A2020202076617220696E747631203D20736574496E74657276616C2866756E6374696F6E28297B0D0A202020202020636F6E736F6C652E6C6F67282773746174696F6E27';
wwv_flow_api.g_varchar2_table(17) := '293B0D0A20202020202069662028617065782E6A517565727928272327202B20705F63686172745F6964202B2027207465787427292E6C656E677468203D3D203029207B0D0A202020202020202072657475726E3B0D0A2020202020207D0D0A20202020';
wwv_flow_api.g_varchar2_table(18) := '20206D61702E67657443616E76617328292E7374796C652E637572736F72203D20276E6F742D616C6C6F776564273B0D0A2020202020200D0A2020202020202F2F20616464207468652073746174696F6E73206C6162656C656420696E20746865206368';
wwv_flow_api.g_varchar2_table(19) := '61727420726567696F6E205820617869732E0D0A202020202020766172206D617053746174696F6E73203D205B5D3B0D0A202020202020617065782E6A51756572792E6561636828617065782E6A517565727928272327202B20705F63686172745F6964';
wwv_flow_api.g_varchar2_table(20) := '202B2027207465787427292C2066756E6374696F6E286E2C206974656D29207B0D0A2020202020202020696620286974656D2E696E6E657248544D4C2E696E6465784F6628272B2729203E202D3129207B0D0A202020202020202020206D617053746174';
wwv_flow_api.g_varchar2_table(21) := '696F6E732E70757368287061727365466C6F6174286974656D2E696E6E657248544D4C2E7265706C61636528222B222C2027272929293B0D0A20202020202020207D0D0A2020202020207D293B0D0A202020202020696620286D617053746174696F6E73';
wwv_flow_api.g_varchar2_table(22) := '2E6C656E677468203D3D203029207B0D0A202020202020202072657475726E3B0D0A2020202020207D0D0A202020202020636C656172496E74657276616C28696E747631293B0D0A0D0A2020202020202F2F207075742073746174696F6E2076616C7565';
wwv_flow_api.g_varchar2_table(23) := '7320696E746F206120636F6D6D612D64656C696D69746564206C69737420616E642063616C6C6261636B20746865204150455820746F206765740D0A2020202020202F2F20612067656F6A736F6E20646174617365742077697468207468652067656F6D';
wwv_flow_api.g_varchar2_table(24) := '65747279206F662074686520696E7075742073746174696F6E732E0D0A202020202020617065782E7365727665722E706C7567696E28705F616A61785F6964656E7469666965722C207B7830313A206D617053746174696F6E732E6A6F696E28272C2729';
wwv_flow_api.g_varchar2_table(25) := '2C207830323A2027277D2C207B0D0A2020202020202020737563636573733A2066756E6374696F6E2028704461746129207B0D0A20202020202020202020636F6E736F6C652E6C6F67282773746174696F6E2063616C6C6261636B27293B0D0A20202020';
wwv_flow_api.g_varchar2_table(26) := '202020202020636F6E736F6C652E6C6F67287044617461293B0D0A2020202020202020202069662028226572726F722220696E20704461746129207B0D0A202020202020202020202020617065785F616C65727428657272293B0D0A2020202020202020';
wwv_flow_api.g_varchar2_table(27) := '20207D20656C7365207B0D0A2020202020202020202020202F2F2064656C657465206578697374696E67206D61726B6572730D0A202020202020202020202020666F72202876617220693D303B2069203C206D61726B6572732E6C656E6774683B20692B';
wwv_flow_api.g_varchar2_table(28) := '2B29207B0D0A20202020202020202020202020206D61726B6572735B695D2E72656D6F766528293B0D0A2020202020202020202020207D0D0A2020202020202020202020206D61726B6572732E73706C69636528302C6D61726B6572732E6C656E677468';
wwv_flow_api.g_varchar2_table(29) := '293B0D0A2020202020202020202020200D0A2020202020202020202020202F2F2069746572617465207468726F756768207468652073746174696F6E206D61726B657220636F6F7264696E61746520646174612066726F6D207468652063616C6C626163';
wwv_flow_api.g_varchar2_table(30) := '6B0D0A2020202020202020202020202F2F20616E6420637265617465206D61726B6572732E20546865206D61726B657273206172652073746174696F6E206C6162656C20737472696E67732E0D0A202020202020202020202020666F7220287661722069';
wwv_flow_api.g_varchar2_table(31) := '3D303B69203C2070446174612E66656174757265732E6C656E6774683B692B2B29207B0D0A202020202020202020202020202076617220656C203D20646F63756D656E742E637265617465456C656D656E74282764697627293B0D0A2020202020202020';
wwv_flow_api.g_varchar2_table(32) := '202020202020656C2E696E6E657248544D4C203D20273C646976207374796C653D22666F6E742D7765696768743A626F6C642220636C6173733D2227202B206C6162656C436C617373202B2027223E27202B2070446174612E66656174757265735B695D';
wwv_flow_api.g_varchar2_table(33) := '2E70726F706572746965732E73746174696F6E20202B20273C2F6469763E273B0D0A20202020202020202020202020200D0A2020202020202020202020202020766172206D61726B65724C6162656C203D206E6577206D61706C69622E4D61726B657228';
wwv_flow_api.g_varchar2_table(34) := '7B656C656D656E743A20656C2C206F66667365743A205B31302C31305D7D292E7365744C6E674C6174285B70446174612E66656174757265735B695D2E67656F6D657472792E636F6F7264696E617465735B305D2C2070446174612E6665617475726573';
wwv_flow_api.g_varchar2_table(35) := '5B695D2E67656F6D657472792E636F6F7264696E617465735B315D5D292E616464546F286D6170293B0D0A20202020202020202020202020206D61726B6572732E70757368286D61726B65724C6162656C293B2020202020200D0A202020202020202020';
wwv_flow_api.g_varchar2_table(36) := '2020207D0D0A2020202020202020202020200D0A2020202020202020202020202F2F2072656D6F7665206578697374696E6720736F7572636520616E64206C6179657220646174610D0A202020202020202020202020696620286D61702E6765744C6179';
wwv_flow_api.g_varchar2_table(37) := '65722827737461746C79725F27202B20705F6974656D5F69642929207B0D0A20202020202020202020202020206D61702E72656D6F76654C617965722827737461746C79725F27202B20705F6974656D5F6964293B0D0A2020202020202020202020207D';
wwv_flow_api.g_varchar2_table(38) := '0D0A202020202020202020202020696620286D61702E676574536F75726365282773746174736F757263655F27202B20705F6974656D5F69642929207B0D0A20202020202020202020202020206D61702E72656D6F7665536F7572636528277374617473';
wwv_flow_api.g_varchar2_table(39) := '6F757263655F27202B20705F6974656D5F6964293B0D0A2020202020202020202020207D0D0A2020202020202020202020200D0A2020202020202020202020202F2F20637265617465206C6179657220776974682073746174696F6E206D61726B657220';
wwv_flow_api.g_varchar2_table(40) := '636F6F7264696E61746520646174612066726F6D207468652063616C6C6261636B0D0A2020202020202020202020206D61702E616464536F75726365282773746174736F757263655F27202B20705F6974656D5F69642C207B0D0A202020202020202020';
wwv_flow_api.g_varchar2_table(41) := '2020202020277479706527203A202767656F6A736F6E272C0D0A2020202020202020202020202020276461746127203A2070446174610D0A2020202020202020202020207D293B0D0A0D0A2020202020202020202020202F2F2061646420746865206C61';
wwv_flow_api.g_varchar2_table(42) := '79657220746F20746865206D61702E20757365207468652073657175656E6365206E756D6265722066726F6D207468652070616765200D0A2020202020202020202020202F2F206974656D20746F206F7264657220746865206C61796572732E20486967';
wwv_flow_api.g_varchar2_table(43) := '686572206E756D6265727320617265206C61737420616E6420646973706C61796564206F6E20746F702E0D0A202020202020202020202020766172206C7972203D207B27696427203A2027737461746C79725F27202B20705F6974656D5F69642C200D0A';
wwv_flow_api.g_varchar2_table(44) := '20202020202020202020202020202020202020202020277479706527203A202773796D626F6C272C0D0A2020202020202020202020202020202020202020202027736F7572636527203A202773746174736F757263655F27202B20705F6974656D5F6964';
wwv_flow_api.g_varchar2_table(45) := '2C0D0A202020202020202020202020202020202020202020206C61796F7574203A207B0D0A2020202020202020202020202020202020202020202020202769636F6E2D696D61676527203A20277374617469636F6E5F27202B20705F6974656D5F69642C';
wwv_flow_api.g_varchar2_table(46) := '0D0A2020202020202020202020202020202020202020202020202769636F6E2D73697A6527203A20312E300D0A202020202020202020202020202020202020202020207D0D0A20202020202020202020202020202020202020207D3B0D0A202020202020';
wwv_flow_api.g_varchar2_table(47) := '202020202020766172206C6179657273203D206D61702E6765745374796C6528292E6C61796572733B0D0A202020202020202020202020766172206D6170626974736C6179657273203D206C61796572732E66696C7465722866756E6374696F6E287661';
wwv_flow_api.g_varchar2_table(48) := '6C297B0D0A202020202020202020202020202069662028276D657461646174612720696E2076616C29207B200D0A2020202020202020202020202020202072657475726E20276C617965725F73657175656E63652720696E2076616C2E6D657461646174';
wwv_flow_api.g_varchar2_table(49) := '613B0D0A20202020202020202020202020207D20656C7365207B0D0A2020202020202020202020202020202072657475726E2066616C73653B0D0A20202020202020202020202020207D0D0A2020202020202020202020207D292E6D61702866756E6374';
wwv_flow_api.g_varchar2_table(50) := '696F6E2876616C29207B72657475726E205B76616C2E6D657461646174612E6C617965725F73657175656E63652C2076616C2E69645D7D293B0D0A202020202020202020202020696620286D6170626974736C61796572732E6C656E677468203D3D2030';
wwv_flow_api.g_varchar2_table(51) := '29207B0D0A20202020202020202020202020206D61702E6164644C61796572286C7972293B200D0A2020202020202020202020207D20656C7365207B0D0A20202020202020202020202020206D6170626974736C61796572732E736F727428293B0D0A20';
wwv_flow_api.g_varchar2_table(52) := '20202020202020202020202020666F722876617220693D303B693C6D6170626974736C61796572732E6C656E6774683B692B2B29207B0D0A2020202020202020202020202020202069662028705F73657175656E6365203C206D6170626974736C617965';
wwv_flow_api.g_varchar2_table(53) := '72735B695D5B305D29207B0D0A2020202020202020202020202020202020206D61702E6164644C61796572286C79722C206D6170626974736C61796572735B695D5B315D293B200D0A20202020202020202020202020202020202072657475726E3B0D0A';
wwv_flow_api.g_varchar2_table(54) := '202020202020202020202020202020207D0D0A20202020202020202020202020207D0D0A20202020202020202020202020206D61702E6164644C61796572286C7972293B0D0A2020202020202020202020207D0D0A0D0A2020202020202020202020202F';
wwv_flow_api.g_varchar2_table(55) := '2F20666974207669657720746F207468652073746174696F6E206D61726B6572730D0A20202020202020202020202076617220626F756E6473203D206E6577206D61706C69622E4C6E674C6174426F756E647328293B0D0A202020202020202020202020';
wwv_flow_api.g_varchar2_table(56) := '666F72202876617220693D303B69203C2070446174612E66656174757265732E6C656E6774683B692B2B29207B0D0A2020202020202020202020202020626F756E64732E657874656E642870446174612E66656174757265735B695D2E67656F6D657472';
wwv_flow_api.g_varchar2_table(57) := '792E636F6F7264696E61746573293B200D0A2020202020202020202020207D0D0A2020202020202020202020206D61702E666974426F756E647328626F756E64732C207B70616464696E673A207B746F703A2032302C20626F74746F6D3A32302C206C65';
wwv_flow_api.g_varchar2_table(58) := '66743A2032302C2072696768743A2032307D7D293B20202020202020202020202020200D0A2020202020202020202020206D61702E67657443616E76617328292E7374796C652E637572736F72203D202764656661756C74273B0D0A2020202020202020';
wwv_flow_api.g_varchar2_table(59) := '20207D0D0A20202020202020207D0D0A2020202020207D293B0D0A202020207D2C20323030293B0D0A20207D0D0A20202F2F2073746174696F6E206F6E206461746120616E642076696577706F7274206368616E6765202020200D0A2020617065782E6A';
wwv_flow_api.g_varchar2_table(60) := '517565727928272327202B20705F63686172745F6964292E6F6E28276F6A76696577706F72746368616E6765272C2066756E6374696F6E2829207B73746174696F6E28293B7D293B20200D0A2020617065782E6A517565727928272327202B20705F6368';
wwv_flow_api.g_varchar2_table(61) := '6172745F6964292E6F6E282761706578616674657272656672657368272C2066756E6374696F6E2829207B73746174696F6E28293B7D293B20200D0A20200D0A7D';
null;
end;
/
begin
wwv_flow_api.create_plugin_file(
 p_id=>wwv_flow_api.id(291957308237880597)
,p_plugin_id=>wwv_flow_api.id(408526742970976255)
,p_file_name=>'mapbits-station.js'
,p_mime_type=>'application/javascript'
,p_file_charset=>'utf-8'
,p_file_content=>wwv_flow_api.varchar2_to_blob(wwv_flow_api.g_varchar2_table)
);
end;
/
begin
wwv_flow_api.g_varchar2_table := wwv_flow_api.empty_varchar2_table;
wwv_flow_api.g_varchar2_table(1) := '89504E470D0A1A0A0000000D494844520000000F0000000F080400000091DF5DC10000000467414D410000B18F0BFC6105000000206348524D00007A26000080840000FA00000080E8000075300000EA6000003A98000017709CBA513C00000002624B47';
wwv_flow_api.g_varchar2_table(2) := '440000AA8D233200000009704859730000005A0000005A007023B87D0000000774494D4507E50709083226741B333F000000944944415418D385904B0E83300C44DF094AA27E966CB8FF0D90A84055819266D1CB2075E12E4C500D51EB959D79B632037F';
wwv_flow_api.g_varchar2_table(3) := 'EBC615BF79F33474DAD608C1009E80D0EA70E08E10392EA26344889C12FD0DA8F85C6103548C08C18A00053DC21B61C0E51C94CC0833654E740CCB764F911723150F84C9E690ACE8CF270BF88D150D6505DADDB9332F845A878E6697F9859042FD511F20';
wwv_flow_api.g_varchar2_table(4) := 'AB3E02F292B8890000002574455874646174653A63726561746500323032312D30362D32325430393A33333A34362D30353A303026A943800000002574455874646174653A6D6F6469667900323032312D30372D30395430383A35303A33382D30353A30';
wwv_flow_api.g_varchar2_table(5) := '308A1F1A9F00000072744558747376673A626173652D7572690066696C653A2F2F2F433A2F55736572732F42324544534D43462F446F776E6C6F6164732F6D6170626F782D6D616B692D76372E302E302D302D67666664646431312F6D6170626F782D6D';
wwv_flow_api.g_varchar2_table(6) := '616B692D666664646431312F69636F6E732F63726F73732E7376674F4FC8BB0000000049454E44AE426082';
null;
end;
/
begin
wwv_flow_api.create_plugin_file(
 p_id=>wwv_flow_api.id(408767740966086634)
,p_plugin_id=>wwv_flow_api.id(408526742970976255)
,p_file_name=>'cross.png'
,p_mime_type=>'image/png'
,p_file_charset=>'utf-8'
,p_file_content=>wwv_flow_api.varchar2_to_blob(wwv_flow_api.g_varchar2_table)
);
end;
/
prompt --application/end_environment
begin
wwv_flow_api.import_end(p_auto_install_sup_obj => nvl(wwv_flow_application_install.get_auto_install_sup_obj, false));
commit;
end;
/
set verify on feedback on define on
prompt  ...done
